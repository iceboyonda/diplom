{% extends 'base.html' %}

{% block title %}{{ rim.brand }} {{ rim.name }} - Tyre Trust{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Заголовок и описание -->
    <div class="row">
        <div class="col-12 d-flex flex-column align-items-center">
            <h1 class="rim-title text-center mb-2">{{ rim.brand }} {{ rim.name }}</h1>
            {% if rim.description %}
                <div class="rim-desc text-center mb-3">{{ rim.description }}</div>
            {% endif %}
        </div>
    </div>
    <!-- Фото и таблица в одной линии -->
    <div class="row align-items-stretch">
        <div class="col-md-5 d-flex align-items-stretch">
            {% if rim.name == "LAS-R" %}
                <div class="rim-image-wrapper special-rim-image mx-auto d-flex align-items-center justify-content-center">
                    {% if rim.image and rim.image.url %}
                        <img src="{{ rim.image.url }}" class="img-fluid special-rim-img" alt="{{ rim.brand }} {{ rim.name }}">
                    {% else %}
                        {% with variant=rim.variants.all|first %}
                            {% if variant and variant.image and variant.image.url %}
                                <img src="{{ variant.image.url }}" class="img-fluid special-rim-img" alt="{{ rim.brand }} {{ rim.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/400x400?text=Нет+изображения" class="img-fluid special-rim-img" alt="Нет изображения">
                            {% endif %}
                        {% endwith %}
                    {% endif %}
                </div>
            {% else %}
                <div class="rim-image-wrapper w-100 h-100 d-flex align-items-center justify-content-center" style="min-height:340px;">
                    {% if rim.image and rim.image.url %}
                        <img src="{{ rim.image.url }}" class="img-fluid" style="max-width:100%; max-height:400px; border-radius: 12px;" alt="{{ rim.brand }} {{ rim.name }}">
                    {% else %}
                        {% with variant=rim.variants.all|first %}
                            {% if variant and variant.image and variant.image.url %}
                                <img src="{{ variant.image.url }}" class="img-fluid" style="max-width:100%; max-height:400px; border-radius: 12px;" alt="{{ rim.brand }} {{ rim.name }}">
                            {% else %}
                                <img src="https://via.placeholder.com/400x400?text=Нет+изображения" class="img-fluid" style="max-width:100%; max-height:400px; border-radius: 12px;" alt="Нет изображения">
                            {% endif %}
                        {% endwith %}
                    {% endif %}
                </div>
            {% endif %}
        </div>
        <div class="col-md-7 d-flex flex-column justify-content-center align-items-stretch">
            <h5 class="mb-2 mt-0">Доступные варианты:</h5>
            <div id="rim-variants-list" class="fade-transition h-100 d-flex flex-column justify-content-center">
                {% include "tyres/_rim_variants_list_partial.html" %}
            </div>
        </div>
    </div>
</div>

<!-- Технические характеристики -->
<div class="row justify-content-center mt-4 mb-4">
    <div class="col-lg-10 mx-auto">
        <div class="card shadow">
            <div class="card-header py-2">
                <h5 class="mb-0">Технические характеристики</h5>
            </div>
            <div class="card-body p-4">
                <div class="row">
                    <div class="col-md-6">
                        <table class="table table-lg mb-0 fs-5">
                            <tbody>
                                <tr>
                                    <th scope="row">Бренд</th>
                                    <td>{{ rim.brand }}</td>
                                </tr>
                                <tr>
                                    <th scope="row">Модель</th>
                                    <td>{{ rim.name }}</td>
                                </tr>
                                <tr>
                                    <th scope="row">Диаметр</th>
                                    <td>
                                        {% if diameters|length == 1 %}
                                            {{ diameters.0 }}
                                        {% elif diameters %}
                                            {{ diameters.0 }}–{{ diameters|last }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">Ширина</th>
                                    <td>
                                        {% if widths|length == 1 %}
                                            {{ widths.0 }}
                                        {% elif widths %}
                                            {{ widths.0 }}–{{ widths|last }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">Крепление (PCD)</th>
                                    <td>
                                        {% if bolt_patterns|length == 1 %}
                                            {{ bolt_patterns.0 }}
                                        {% elif bolt_patterns %}
                                            {{ bolt_patterns.0 }}–{{ bolt_patterns|last }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-lg mb-0 fs-5">
                            <tbody>
                                <tr>
                                    <th scope="row">Вылет (ET)</th>
                                    <td>
                                        {% if offsets|length == 1 %}
                                            {{ offsets.0 }}
                                        {% elif offsets %}
                                            {{ offsets.0 }}–{{ offsets|last }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">DIA</th>
                                    <td>
                                        {% if dias|length == 1 %}
                                            {{ dias.0 }}
                                        {% elif dias %}
                                            {{ dias.0 }}–{{ dias|last }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">Цвет</th>
                                    <td>
                                        {% if colors|length == 1 %}
                                            {{ colors.0 }}
                                        {% elif colors %}
                                            {{ colors|join:', ' }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">Материал</th>
                                    <td>
                                        {% if materials|length == 1 %}
                                            {{ materials.0 }}
                                        {% elif materials %}
                                            {{ materials|join:', ' }}
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">Дата обновления</th>
                                    <td>—</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.rim-title {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    margin-top: 0.5rem;
}
.rim-desc {
    font-size: 1.1rem;
    color: #bdbdbd;
    margin-bottom: 1rem;
}
.special-rim-image {
    width: 420px;
    height: 420px;
    background: #23262F;
    border-radius: 18px;
    overflow: hidden;
}
.special-rim-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    border-radius: 18px;
}
@media (min-width: 768px) {
    .rim-image-wrapper, .col-md-7 {
        min-height: 420px;
    }
    .col-md-7 {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    #rim-variants-list {
        margin-top: 0 !important;
    }
}
</style>
{% endblock %} 
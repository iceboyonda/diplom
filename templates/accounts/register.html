{% extends "base.html" %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 70vh;">
    <div class="card shadow p-4" style="width: 100%; max-width: 340px; border-radius: 16px;">
        <h2 class="mb-4 text-center">Регистрация</h2>
        <form method="post">
            {% csrf_token %}
            {% for field in form %}
                <div class="mb-2">
                    <label for="{{ field.id_for_label }}" class="form-label mb-1">{{ field.label }}</label>
                    {% if field.name == 'password1' or field.name == 'password2' %}
                        <div class="input-group">
                            {{ field }}
                            <button type="button" class="btn btn-outline-secondary password-toggle-btn p-0" tabindex="-1" onclick="togglePassword('{{ field.id_for_label }}', this)">
                                <span class="password-eye d-flex align-items-center justify-content-center" style="width:32px;height:32px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                                </span>
                            </button>
                        </div>
                    {% else %}
                        {{ field }}
                    {% endif %}
                    {% if field.help_text %}
                        <div class="form-text">{{ field.help_text|safe }}</div>
                    {% endif %}
                    {% for error in field.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
            {% endfor %}
            <button type="submit" class="btn btn-success w-100 py-2 fs-5 mt-3">Зарегистрироваться</button>
        </form>
    </div>
</div>
<style>
.input-group .form-control {
    border-radius: 0.375rem 0 0 0.375rem;
    height: 40px;
}
.password-toggle-btn {
    width: 40px;
    height: 40px;
    min-width: 40px;
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0 0.375rem 0.375rem 0 !important;
}
.password-eye svg {
    transition: 0.2s;
    display: block;
    margin: 0 auto;
}
.password-eye.open svg {
    filter: drop-shadow(0 0 2px #198754);
}
.form-label {
    font-weight: 500;
    margin-bottom: 0.25rem;
}
.form-control {
    height: 40px;
    font-size: 1rem;
}
.mb-2 {
    margin-bottom: 0.85rem !important;
}
</style>
<script>
function togglePassword(id, btn) {
    var input = document.getElementById(id);
    var eye = btn.querySelector('.password-eye');
    if (input.type === "password") {
        input.type = "text";
        eye.classList.add('open');
        eye.innerHTML = `<svg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/><line x1='4' y1='4' x2='20' y2='20' stroke='currentColor' stroke-width='2' stroke-linecap='round'/></svg>`;
    } else {
        input.type = "password";
        eye.classList.remove('open');
        eye.innerHTML = `<svg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/></svg>`;
    }
}
</script>
{% endblock %} 
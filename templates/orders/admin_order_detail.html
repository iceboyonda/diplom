{% extends 'base.html' %}
{% block title %}Заказ №{{ order.id }}{% endblock %}
{% block content %}
<div class="container py-5" style="max-width: 700px;">
    <div class="card shadow bg-dark text-light">
        <div class="card-body">
            <h2 class="mb-4">Заказ №{{ order.id }}</h2>
            <div class="mb-3"><b>Пользователь:</b> {{ order.user.username }}</div>
            <div class="mb-3"><b>Дата создания:</b> {{ order.created|date:'d.m.Y H:i' }}</div>
            <div class="mb-3"><b>Статус:</b>
                <form method="post" class="d-inline">
                    {% csrf_token %}
                    <select name="status" class="form-select d-inline w-auto">
                        {% for value, label in order.STATUS_CHOICES %}
                            <option value="{{ value }}" {% if order.status == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="btn btn-primary btn-sm ms-2">Сохранить</button>
                </form>
            </div>
            <div class="mb-3"><b>Сумма заказа:</b> {{ order.get_total_cost|floatformat:0 }} ₽</div>
            <div class="mb-3"><b>Состав заказа:</b>
                <ul class="list-group">
                    {% for item in order.items.all %}
                        <li class="list-group-item bg-dark text-light d-flex justify-content-between align-items-center">
                            {{ item.tyre }} — {{ item.quantity }} шт. ({{ item.price|floatformat:0 }} ₽/шт)
                            <span class="badge bg-secondary">{{ item.get_cost|floatformat:0 }} ₽</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <a href="{% url 'orders:admin_orders' %}" class="btn btn-outline-secondary mt-4">Назад к заказам</a>
        </div>
    </div>
</div>
{% endblock %} 